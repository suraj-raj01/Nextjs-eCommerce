var viaAddressSelect=!1,addressID="";function debounce(e,t,o){let n;return function(){let a=this,l=arguments,i=o&&!n;clearTimeout(n),n=setTimeout((function(){n=null,o||e.apply(a,l)}),t),i&&e.apply(a,l)}}function initAutocomplete(){if(!document.getElementsByClassName("d-prod-form")[0]){var e=document.querySelectorAll(".autocomplete-results");if("checkout"==pgtype&&isPhone&&isRevamp)var t=e[0];else t=e[e.length-1];var o=document.getElementById("pincode_city_field"),n=(document.getElementById("location-input"),$("#pincode_city_field").length?$("#pincode_city_field"):$("#country")),a=$(".form-input-country").length?$(".form-input-country"):$("#countName"),l=n.outerHeight(),i=(a.position().left,""),r="",c="",s=0,d=$("body").data("page");if(o)r="India",i="IN",t.style.left=0,t.style.top="26px";else{if(0==(r=document.querySelectorAll('input[name="cname"]')).length)return!1;t.style.left="10px",t.style.top="30px",e.length>1&&(t.style.width="100%",t.style.left="0px",t.style.top="30px")}if("undefined"==typeof google){var u="https://maps.googleapis.com/maps/api/js?key="+getGoogleMapsApiKey+"&libraries=places&callback=Function.prototype",p=document.createElement("script");p.src=u,p.onload=y,document.body.appendChild(p)}else y()}function y(){var e=new google.maps.places.AutocompleteService;if(void 0===typeof n)var n=new google.maps.Geocoder;else n=new google.maps.Geocoder;var a=[],u=document.querySelectorAll(".input-autocomplete-google-map"),p=(document.querySelectorAll(".input-autocomplete-google-map"),document.querySelectorAll("input[name=cname]"));$(document).on("click","ul.autocomplete-results",(function(e){!function(e,t){if(e.stopPropagation(),e.preventDefault(),s>0)return!1;t=$(".autocomplete-results")[0],t.style.display="none";let a=$(e.target).parents(".country-mob-input-container").find(".input-autocomplete-google-map")[0];a.value="";document.querySelectorAll("#new-city"),document.querySelectorAll("#new-state");const l=e.target.getAttribute("data-place-id");let u={placeId:l};new Promise((e=>{$.ajax({url:"/globalfetch/pincodes?"+r+"&"+l,method:"GET",dataType:"json",async:!0,cache:!0,contentType:"application/json; charset=UTF-8",beforeSend:function(e){console.log("before Send")},success:function(t,o,n){e(t.data)},error:function(e){console.log("error get: "+JSON.stringify(e))}})})).then((e=>{let t=[];try{t=e?JSON.parse(e):[]}catch(e){console.log(e)}var s="",p="",y="",_="";if(t&&t.pincode){s=$(a)[0],i=$(".redirect-url")[0];let e={postalCode:s,country:_,countryCode:i};$("#pincode_city_field").val(t.pincode),saveSearchedKeywordsAndNavigation(null,null,null,null,e.postalCode.value),savePdpReco(null,null,null,null,e.postalCode.value),g(!1,e)}else n.geocode(u,(function(e,t){var d=e?e[0]:null;if(d){let e=[];for(let t in d)if("address_components"===t){e=d[t];break}for(var u in m(e,a),d.address_components)if(-1!=d.address_components[u].types.indexOf("postal_code")){if(s=d.address_components[u].long_name,!$("#pincode_city_field").val()||!$("#pincode_city_field").val().trim())return $(".global_popup_error_cont").html("Please enter a pincode"),globalPopupError(),!1;$.ajax({url:"/add/pincodes?"+r+"&"+l,method:"POST",data:JSON.stringify({pincode:$("#pincode_city_field").val()}),cache:!0,contentType:"application/json; charset=UTF-8",dataType:"json",processData:!1,beforeSend:function(e){console.log("before Send")},success:function(e,t,o){console.log("save success",e)},error:function(e){console.log("error post: "+JSON.stringify(e))}})}}if(!$("#pincode_city_field").val()&&!$("#pincode_city_field").val().trim())return $(".global_popup_error_cont").html("Please enter a pincode"),globalPopupError(),!1;if(y&&p)new Promise((e=>{if(s)e(d);else{var t=d.geometry.location.lat(),l=d.geometry.location.lng(),i={lat:parseFloat(t),lng:parseFloat(l)};n.geocode({location:i},(function(t,n){var l=t?t[0]:null;if(l)for(var i in m(l.address_components,a),l.address_components)-1!=l.address_components[i].types.indexOf("postal_code")&&(s=l.address_components[i].long_name,o&&updatePincodeFromGoogle(s),e(l))}))}})).then((e=>{g(!1,null),$.ajax({url:"/add/pincodes?"+r+"&"+l,method:"POST",data:JSON.stringify(e),cache:!0,contentType:"application/json; charset=UTF-8",dataType:"json",processData:!1,beforeSend:function(e){console.log("before Send")},success:function(e,t,o){console.log("save success",e)},error:function(e){console.log("error post: "+JSON.stringify(e))}})}));else{"IN"==i&&g(!0,null);let e="undefined"!=typeof predictions&&predictions.find((e=>e.place_id==l));e&&(e.description="",$.ajax({url:"/add/address?"+r+"&"+c,method:"POST",data:JSON.stringify([e]),cache:!0,contentType:"application/json; charset=UTF-8",beforeSend:function(e){console.log("before Send getsignup")},success:function(e,t,o){console.log("save success",e)},error:function(e){console.log("error : "+JSON.stringify(e))}}))}}));function m(e,t){let o,n;o=$(t)[0];let a={postalCode:o,country:n,countryCode:i=$(".redirect-url")[0]};new Promise((function(t,o){t(getAssignment(a,e))})).then((function(e){"99"==a.countryCode.value&&a.postalCode&&!isNaN(a.postalCode.value)&&6==a.postalCode.value.length&&$.ajax({url:"/api/user/address?cid="+a.countryCode.value+"&pin="+a.postalCode.value,method:"GET",dataType:"json",contentType:"application/json; charset=UTF-8",async:!0,cache:!0,beforeSend:function(e){console.log("before pin send")},success:function(e,t,o){return e.error?(g(!0,a),!1):(a.city_locality.value=e.city,a.state.value=e.state,!0)},error:function(e){g(!0,a),a.postalCode.focus()},complete:function(e,t){}}),"prod-des"!=d&&!$(".changeCountry_cont").length&&!a.postalCode.value||a.state&&!a.state.value||a.city_locality&&!a.city_locality.value||a.city_postal_town&&!a.city_postal_town.value||a.city_sublocality&&!a.city_sublocality.value?g(!0,a):g(!1,a)}))}function g(e,t){t&&"99"!=t.countryCode.value&&e?t.postalCode.value||t.postalCode.classList.add("error"):t&&e&&(t.postalCode.value="",t.state.value="",t.city_locality.value="",t.city_postal_town.value="",t.city_sublocality.value="",t.postalCode.classList.add("error")),e||(t.postalCode&&t.postalCode.classList.remove("error"),t&&t.state&&t.state.value&&t.state.classList.remove("error"),t&&t.city_locality&&t.city_locality.value||t&&t.city_locality&&t.city_locality.value?t.city_locality.classList.remove("error"):t&&t.city_sublocality&&t.city_sublocality.value&&t.city_sublocality.classList.remove("error"))}})),s++}(e,t)}));let y=function(e,o,n){let i=[];if(o!=google.maps.places.PlacesServiceStatus.OK)return i.push('<li class="autocomplete-item" data-type="place">No Result Found</li>'),t.innerHTML=i.join(""),void(t.style.display="none");a.push(...e),n||$.ajax({url:"/add/address?"+r+"&"+c,method:"POST",data:JSON.stringify(e),cache:!0,contentType:"application/json; charset=UTF-8",beforeSend:function(e){console.log("before Send getsignup")},success:function(e,t,o){console.log("save success",e)},error:function(e){console.log("error : "+JSON.stringify(e))}}),e.forEach((function(e,t){t<11&&e.description&&i.push(`<li data-type="place" style="display:flex;position:relative;"><span class="autocomplete-icon icon-localities"></span><span class="autocomplete-text autocomplete-item Paragraph-12-XS--Regular" style="flex: 1;" data-place-id=${e.place_id}>${e.description}</span></li>`)})),t.innerHTML=i.join(""),i.length>0?t.style.display="block":t.style.display="none",$(".autocomplete-results").css({left:"-2px",top:l+5+"px"}),pdpDropDownHeight("static"),s=0};u.length>1&&(r=document.querySelector(".country-mob-input-container #country").value);for(let e of p)e.addEventListener("blur",(function(){var t=JSON.parse(sessionStorage.getItem("ccdata"));let o=t&&t.countries.find((function(t){return t.name==e.value}));i=o?o.ccode:"All",r=o?o.code:"All"}));$(document).on("input","#pincode_city_field",debounce((function(o){$(".global_popup_error_cont").addClass("hide"),$(".country_global_input_cont .input_field_container").removeClass("global_error_cont"),t=$(".autocomplete-results")[0],r=$(this).parents(".country-mob-input-container").find("#country").val();let n=this.value;c=this.value,n.replace('"','\\"').replace(/^\s+|\s+$/g,"");let a=n.trim();isNaN(a)||6!==a.length?""!==a&&a.length>2?isNaN(n)&&new Promise((e=>{$.ajax({url:"/fetch/address",method:"GET",data:r+"&"+n,dataType:"json",async:!0,cache:!0,contentType:"application/json; charset=UTF-8",beforeSend:function(e){console.log("before Send")},success:function(t,o,n){e(t.data)},error:function(e){console.log("error get: "+JSON.stringify(e))}})})).then((t=>{if("["==t.charAt(0))$.ajax({url:"/deleteOldKeys",method:"GET",data:r,dataType:"json",async:!0,cache:!0,contentType:"application/json; charset=UTF-8",beforeSend:function(e){console.log("before Send")},success:function(e,t,o){console.log("delete keys",e)},error:function(e){console.log("error get: "+JSON.stringify(e))}});else{t&&(t="["+t.substring(1)+"]");let o=[];try{o=t?JSON.parse(t):[]}catch(e){console.log(e)}if(o.length>0)y(o,"OK",o);else{let t=JSON.parse(sessionStorage.getItem("ccdata"));i=(i=t.countries.find((e=>e.code==i)))&&i.ccode,e.getPlacePredictions({input:n,componentRestrictions:{country:i}},y)}}})):($(".delivery-cont-overlay").hide(),t.innerHTML="",t.style.display="none",pdpDropDownHeight()):$(this).val(a)}),300))}}function pdpDropDownHeight(e){let t=document.querySelectorAll(".autocomplete-item"),o=document.querySelector(".attr-container-content.open-accordion");o&&(t.length>0?o.style.minHeight="300px":o.style.minHeight="auto","auto"==e&&(o.style.minHeight="auto"))}function getAssignment(e,t){for(var o in t)if(t[o].types.includes("postal_code")&&e.postalCode?(e.postalCode.value=t[o].long_name,saveSearchedKeywordsAndNavigation(null,null,null,null,e.postalCode.value),savePdpReco(null,null,null,null,e.postalCode.value)):t[o].types.includes("administrative_area_level_1")&&e.state?e.state.value=t[o].long_name.normalize("NFD").replace(/\p{Diacritic}/gu,""):t[o].types.includes("locality")&&e.city_locality?(e.city_locality.value=t[o].long_name.normalize("NFD").replace(/\p{Diacritic}/gu,""),saveSearchedKeywordsAndNavigation(null,null,e.city_locality.value,null,null),savePdpReco(null,null,e.city_locality.value,null,null)):t[o].types.includes("postal_town")&&e.city_locality&&!e.city_locality.value?(e.city_postal_town.value=t[o].long_name.normalize("NFD").replace(/\p{Diacritic}/gu,""),saveSearchedKeywordsAndNavigation(null,null,e.city_postal_town.value,null,null),savePdpReco(null,null,e.city_postal_town.value,null,null)):t[o].types.includes("sublocality")&&e.city_locality&&!e.city_locality.value&&e.city_postal_town&&!e.city_postal_town.value?(e.city_sublocality.value=t[o].long_name.normalize("NFD").replace(/\p{Diacritic}/gu,""),saveSearchedKeywordsAndNavigation(null,null,e.city_sublocality.value,null,null),savePdpReco(null,null,e.city_sublocality.value,null,null)):t[o].types.includes("country")&&e.country&&(e.country.value=e.country.value.normalize("NFD").replace(/\p{Diacritic}/gu,""),saveSearchedKeywordsAndNavigation(null,null,null,e.country.value,null),savePdpReco(null,null,null,e.country.value,null)),t.length-1==o)return!0}$(window).click((function(){let e=document.querySelectorAll(".autocomplete-results");for(let t of e)t.style.display="none"}));var sourceMapedByName,grep=function(e,t){for(var o=[],n=e.length,a=0;a<n;a++){var l=e[a];if(t(l)&&o.push(l),5===o.length)break}return o},removeDupliactes=function(e,t){var o={},n=[];for(var a in e)e[a][t]in o||(o[e[a][t]]=e[a]);for(var t in o)n.push(o[t]);return n};function loadSelectedAddress(e,t){if(t)$.ajax({url:"/api/get/selectedaddress",method:"GET",async:!0,success:function(t,o,n){if(console.log("get aid",t),t.success){let o=t.addressID;localStorage.setItem("addressID",o),markSelectedAddress(e,o)}}});else{let t=localStorage.getItem("addressID");markSelectedAddress(e,t)}}function markSelectedAddress(e,t){var o,n=0;document.querySelectorAll(".addressBox").forEach((function(e,a){e.dataset.addressid==t&&(n=a,o=e)})),$(o).addClass("global_address_selected"),0!=n&&($(".addressBox")[n].remove(),$(".addressBox")[0].insertAdjacentElement("beforebegin",o),$(".address-container").animate({scrollTop:0})),e&&$(".global_container_cont").removeClass("hide")}function globalPopupError(){$(".global_popup_error_cont").removeClass("hide"),$(".country_global_input_cont .input_field_container").addClass("global_error_cont"),setTimeout((function(){$(".redirect-url").removeAttr("disabled"),$(".global_popup_error_cont").addClass("hide"),$(".country_global_input_cont .input_field_container").removeClass("global_error_cont")}),3e3)}function fetchAllAddresses(){$(".global_container_cont.logged-in").length&&$.ajax({url:"/fetchSingleAddress",method:"get",success:function(e){e.length>0?($(".saved_addresses_container").html(e).removeClass("hide"),$(".color-af").removeClass("hide"),$(".divider-line").removeClass("hide"),$(".global_location_main_container").removeClass("no_global_address"),1==$(".saved_addresses_container .addressBox").length&&$(".saved_addresses_container .addressBox").css("margin-bottom","0px"),loadSelectedAddress(!1,!0)):($(".divider-line").addClass("hide"),$(".color-af").addClass("hide"),$(".global_location_main_container").addClass("no_global_address"))}})}function suggestGlobalCountry(){var e=JSON.parse(sessionStorage.getItem("ccdata")),t=e?e.countries:[],o=$(this),n=o.data("selectedCountry")||o.val()||null,a=function(e,t){var o={},n=[];for(var a in e)e[a][t]in o||(o[e[a][t]]=e[a]);for(var t in o)n.push(o[t]);return n}(t.filter((function(e){return 1==e.co})),"ccode");!function(e,t,n,a){var l=$("#countrySelectionModal");l.html("");var i=$('<div class="country-modal-content no-scrollbar"></div>');l.append(i);var r=`<div class="modal-header">\n          <img class="back-arrow" src="${cdn.assetsURL}svg-icons/select_back.svg">\n          <div class="country-search-bar-container">\n          <input type="text" class="country-search-bar Paragraph-14-S--Regular" placeholder="Search country">\n          <img class="search-icon" src="${cdn.assetsURL}svg-icons/search-2.svg">\n          <img class="emptySearch hide" src="${cdn.assetsURL}svg-icons/cross-black.svg">\n      </div></div>`;i.append(r);var c=$('<ul class="country-list-new"></ul>');if(i.append(c),y(e,t,n),$(".country-search-bar").on("input",(function(){var o=$(this).val().trim().toLowerCase(),l=a.filter((function(e){return e.name.toLowerCase().startsWith(o)||e.mprefix&&e.mprefix.toString().startsWith(o)})),i=a.filter((function(e){return!l.includes(e)&&(-1!==e.name.toLowerCase().indexOf(o)||e.mprefix&&-1!==e.mprefix.toString().indexOf(o))})),r=[...l,...i];""!=o?($(".emptySearch").removeClass("hide"),$(".modal-header .search-icon").addClass("hide"),y([],r,n,!0)):($(".modal-header .search-icon").removeClass("hide"),$(".emptySearch").addClass("hide"),y(e,t,n))})),$(".back-arrow").on("click",(function(){l.addClass("hide")})),$(".emptySearch").on("click",(function(o){$(".country-search-bar").val("").focus(),$(".modal-header .search-icon").removeClass("hide"),$(this).addClass("hide"),y(e,t,n)})),l.removeClass("hide"),!isPhone){var s=o.parents(".input-cont-pos").offset(),d=(l.outerWidth(),l.outerHeight(),s.left),u=s.top+o.outerHeight()+7,p=o.parents(".input-cont-pos").width();l.css({position:"absolute",left:d+"px",top:u+"px",zIndex:9999,width:p})}function y(e,t,o,n=!1){if(c.html(""),e.length>0){var a=$('<li class="country-section Paragraph-14-S--Regular">Top Countries</li>');c.append(a),e.forEach((function(e){_(e,o,c)}))}if(t.length>0){var l=$('<li class="country-section Paragraph-14-S--Regular">All Countries</li>');!n&&c.append(l),t.forEach((function(e){_(e,o,c)}))}}function _(e,t,n){var a=$('<li class="country-list-item Paragraph-14-S--Regular"></li>');t&&t==e.name&&a.css({"background-color":"#f6f2ff",color:"#6d4ebf",border:"solid 1px #6d4ebf","border-radius":"2px"});var i=$('<img class="country-flag-new">');i.attr("src",cdn.assetsBaseURL+"banners/countries/"+e.countries_unicode),a.append(i);var r=$('<span class="country-name"></span>').text(e.name);a.append(r),a.on("click",(function(){!function(e,t){o.data("selectedCountry",e.name),o.val(e.name),$(".redirect-url").attr("data-redirecturl",e.url?e.url:""),$(".redirect-url").attr("data-globalcountrycode",e.id?e.id:""),o.removeClass("no_globalCountry_selected"),"99"!=e.id?($("#pincode_city_field").addClass("hide"),e.showInput?($("#pincode_city_field_international").removeClass("hide").val(""),$(".country-mob-input-container .dropdown-cont").removeClass("country-100"),$(".country-mob-input-container .line-divider").removeClass("hide")):($("#pincode_city_field_international").addClass("hide").val(""),$(".country-mob-input-container .dropdown-cont").addClass("country-100"),$(".country-mob-input-container .line-divider").addClass("hide"))):($("#pincode_city_field").removeClass("hide"),$("#pincode_city_field_international").addClass("hide"),$(".country-mob-input-container .dropdown-cont").removeClass("country-100"),$(".country-mob-input-container .line-divider").removeClass("hide"));e.code==$("body").attr("data-defaultcountry")?$(".location_input_container .reset-country").addClass("hide"):$(".location_input_container .reset-country").removeClass("hide");let n=e.countries_unicode?e.countries_unicode:"country_grey.jpeg";$(".selected_country_flag img").attr("src",`${cdn.assetsBaseURL}banners/countries/${n}`),$(".selected_country_flag img").removeClass("only_globe"),t.addClass("hide")}(e,l)})),n.append(a)}}(a.filter((function(e){return 1==e.topCountry})),a.filter((function(e){return 1!=e.topCountry})),n,a)}$(document).ready((function(){if($(".default_country_changepopup_cont").length&&setTimeout((function(){$(".default_country_changepopup_cont").addClass("hide")}),2e3),!localStorage.getItem("globalCountry")&&$(".country_selected_data").attr("data-country")!=$("body").attr("data-storecountry")||localStorage.getItem("globalCountry")&&$(".country_selected_data").attr("data-country")!=localStorage.getItem("globalCountry")){let e={event:"set_location_add",user_mode:$("#user-data").data("userid")?"loggedin":"guest",path:$(".widget_page_cont").length?"TP":"PL",mode:"Auto Set",location_country:$("body").attr("data-selectedcountry"),location_city:$("body").attr("data-selectedcity"),location_pincode:$("body").attr("data-selectedpincode"),is_myhome:!1};pushDataLayer(e),localStorage.setItem("globalCountry",$(".country_selected_data").attr("data-country"))}})),$(document).on("click",".country_changeOverlay",(function(){$(".global_container_cont").length?(isPhone?$("#m-mask").addClass("is-active"):$("#u-mask").addClass("is-active"),loadSelectedAddress(!0,!1)):$.ajax({url:"/getlocationpopup",method:"get",data:{},success:function(e){e&&(isPhone?($("#main-content").append(e),$("#m-mask").addClass("is-active")):($(".site-wrapper-desk").append(e),$("#u-mask").addClass("is-active")),initAutocomplete(),fetchAllAddresses(),locationInputVar2&&830!=storeid||$(".global_container_cont .close-popup").removeClass("hide"))}}),$(this).find(".country_selected_cont").attr("data-showinput")?$(".location_input .dropdown-cont").removeClass("country-100"):$(".location_input .dropdown-cont").addClass("country-100"),$("body").attr("data-storecountry")==$("body").attr("data-defaultcountry")?$(".location_input_container .reset-country").addClass("hide"):$(".location_input_container .reset-country").removeClass("hide"),$("html,body").animate({scrollTop:0}),$("html,body").addClass("no-scroll");let e={event:"set_location_click",user_mode:$("#user-data").data("userid")?"loggedin":"guest",path:$(".widget_page_cont").length?"TP":"PL"};pushDataLayer(e)})),$(document).on("click",".redirect-url",(function(){let e=!1;$(this).attr("disabled","disabled");let t=$(".redirect-url").attr("data-globalcountrycode"),o={country:$(".location_input_container #country").val(),countryCode:t,url:$(".redirect-url").attr("data-redirecturl"),webstoreSameCountry:$(".body_wrapper").attr("data-defaultcountrycode")==t,addressID:addressID};if($(".no_globalCountry_selected").length)return $(".global_popup_error_cont").html("Please select a country"),globalPopupError(),!1;if("99"==t){if(o.pincode=$(".location_input_container #pincode_city_field").val(),isNaN(o.pincode))return $(".global_popup_error_cont").html("Please enter a valid pincode"),globalPopupError(),!1;if(locationInputVar2){if(6!=o.pincode.length)return $(".global_popup_error_cont").html("Please enter a valid pincode"),globalPopupError(),!1}else if(o.pincode.length>0&&6!=o.pincode.length)return $(".global_popup_error_cont").html("Please enter a valid pincode"),globalPopupError(),!1}else{if($(".location_input_container #pincode_city_field_international:not(.hide)").val())o.city=$(".location_input_container #pincode_city_field_international:not(.hide)").val();else if(locationInputVar2){if($(".location_input_container #pincode_city_field_international:not(.hide)").length)return $(".global_popup_error_cont").html("Please select a city"),globalPopupError(),!1}else o.city="";if($(".no_globalCity_selected").length)return $(".global_popup_error_cont").html("Please select a city"),globalPopupError(),!1}if(console.log("saved address",addressID),localStorage.setItem("addressID",addressID),"99"==t&&o.pincode.length>0&&6==o.pincode.length&&$.ajax({url:"/api/user/address?cid=99&pin="+o.pincode,method:"GET",dataType:"json",contentType:"application/json; charset=UTF-8",async:!1,cache:!0,beforeSend:function(e){console.log("before pin send")},success:function(t,n,a){if(t.error)return e=!0,$(".global_popup_error_cont").html("Please enter a valid pincode"),globalPopupError(),!1;e=!1,o.city=t.city}}),e)return!1;$.ajax({url:"/globalcountry",method:"post",data:o,success:function(e){let n=e.countryData,a="",l={event:"set_location_add",user_mode:$("#user-data").data("userid")?"loggedin":"guest",path:$(".widget_page_cont").length?"TP":"PL",mode:$(".global_address_selected").length?"Saved Address":"Location Input",location_country:o.country,location_city:o.city?o.city:"",location_pincode:o.pincode?o.pincode:"",is_myhome:!!$(this).find(".myHome_addressTag").length};pushDataLayer(l),$("body").attr("data-selectedcountry",o.country),$("body").attr("data-selectedcity",o.city),$("body").attr("data-selectedpincode",o.pincode),localStorage.setItem("globalCountry",$(".location_input_container #country").val()),$(".location_input_container #country").val()!=$(".body_wrapper").attr("data-defaultcountry")&&n&&n.redirection?o.webstoreSameCountry?window.location.href="/":window.location.href=`/${$(".redirect-url").attr("data-redirecturl")?$(".redirect-url").attr("data-redirecturl"):""}`:(99==t&&o.pincode?($(".country_selected_cont").removeClass("hide"),$(".default-arrow-right").addClass("hide"),$(".inf-edit-icon").removeClass("hide"),$(".inf-chevron-icon").addClass("hide"),$(".country_content_cont").addClass("hide"),a+=o.city?o.city+' <span class="global_line_dash">-</span> '+o.pincode:o.pincode,$(".location-edit").removeClass("hide")):99!=t||t.pincode||"India"==$(".body_wrapper").data("storecountry")?99!=t&&(!o.webstoreSameCountry||o.webstoreSameCountry&&$(".location_input_container #pincode_city_field_international:not(.hide)").length&&o.city)&&($(".country_selected_cont").removeClass("hide"),$(".default-arrow-right").addClass("hide"),$(".location-edit").removeClass("hide"),$(".inf-edit-icon").removeClass("hide"),$(".inf-chevron-icon").addClass("hide"),$(".country_content_cont").addClass("hide"),a+=`<span class="Paragraph-12-XS--Medium">${$(".location_input_container #country").val()}</span>`+(o.city?' <span class="global_line_dash">-</span> '+o.city:"")):($(".country_selected_cont").removeClass("hide"),$(".inf-edit-icon").removeClass("hide"),$(".inf-chevron-icon").addClass("hide"),$(".country_content_cont").addClass("hide"),$(".default-arrow-right").addClass("hide"),$(".location-edit").removeClass("hide"),a+=`<span class="Paragraph-12-XS--Medium">${$(".location_input_container #country").val()}</span>`),a?$(".country_selected_data").html(a):($(".country_selected_cont").addClass("hide"),$(".country_content_cont").removeClass("hide"),$(".location-edit").addClass("hide"),$(".default-arrow-right").removeClass("hide"),$(".inf-edit-icon").addClass("hide"),$(".inf-chevron-icon").removeClass("hide")),$(".selected_country_flag img").attr("src")&&$(".global_country_flag img").attr("src",$(".selected_country_flag img").attr("src")),!o.webstoreSameCountry&&n.redirection&&$(".global_country_logo").attr("href",`/${$(".redirect-url").attr("data-redirecturl")?$(".redirect-url").attr("data-redirecturl"):""}`),$(".location_input_container #country").val()==$(".body_wrapper").attr("data-defaultcountry")&&(n||n.redirection)||($(".default_country_changepopup_cont").removeClass("hide"),$(".default_country_changepopup_cont .default_country_text").html($(".location_input_container #country").val()),setTimeout((function(){$(".default_country_changepopup_cont").addClass("hide")}),2e3)),$(".global_container_cont").addClass("hide"),viaAddressSelect||$(".saved_addresses_container .addressBox").removeClass("global_address_selected"),addressID="",viaAddressSelect=!1,$("#u-mask").removeClass("is-active"),$("#m-mask").removeClass("is-active"),$("html,body").removeClass("no-scroll"),$(".redirect-url").removeAttr("disabled"),localStorage.setItem("globalUpdateCountry",$(".location_input_container #country").val()),$(".widget_page_cont").length?window.location.reload():isPhone?applyFilters(!0,!1,(function(){})):applyPlpFilter(!0))}})})),$(document).on("click",".close-popup",(function(e){$(".global_container_cont").addClass("hide"),$("#u-mask").removeClass("is-active"),$("#m-mask").removeClass("is-active"),$("html,body").removeClass("no-scroll"),$("#countrySelectionModal").addClass("hide");let t={event:"set_location_close",user_mode:$("#user-data").data("userid")?"loggedin":"guest",path:$(".widget_page_cont").length?"TP":"PL"};pushDataLayer(t)})),$(document).on("focus",".country-mob-input-container #country",(function(){$("guest-country").attr("autocomplete","off"),$("guest-country").attr("autocomplete","none")})),$(document).on("focusin","input.suggestHomeCountry",(function(){var e=JSON.parse(sessionStorage.getItem("ccdata")),t=$(this),o=this,n="co",a=t.data("courier"),l=t.data("redirect"),i=e?e.countries:null,r=t.data("handlers")?t.data("handlers").split(","):[],c=function(e,n,a){if(r.length>0)for(var l in t.data("cid",e),t.data("ccode",n),t.data("cccode",a),r){var i=window[r[l].trim()];i&&i.constructor===Function&&i(o)}};$(window).height(),t.parents("div").height(),t.parents("div").offset().top;isPhone,t.autocomplete({source:function(e,t){var o=grep(i,(function(t){var o=t.name,a=n in t,l=-1!==o.search(new RegExp("\\b"+e.term,"ig")),i=!a||1===t[n];return l&&i}),a);$("ul.ui-menu").css({top:"0px",left:"0px"}),t(o=removeDupliactes(o,"code"))},minLength:2,focus:function(e,o){return t.val(o.item.code),!1},select:function(e,o){e.stopPropagation(),$(".redirect-url").attr("data-redirecturl",o.item.url?o.item.url:""),$(".redirect-url").attr("data-globalcountrycode",o.item.id?o.item.id:""),t.removeClass("no_globalCountry_selected"),c(o.item.id,o.item.code,o.item.ccode),"99"!=o.item.id?($("#pincode_city_field").addClass("hide"),o.item.showInput?($("#pincode_city_field_international").removeClass("hide").val(""),$(".country-mob-input-container .dropdown-cont").removeClass("country-100"),$(".country-mob-input-container .line-divider").removeClass("hide")):($("#pincode_city_field_international").addClass("hide").val(""),$(".country-mob-input-container .dropdown-cont").addClass("country-100"),$(".country-mob-input-container .line-divider").addClass("hide"))):($("#pincode_city_field").removeClass("hide"),$("#pincode_city_field_international").addClass("hide"),$(".country-mob-input-container .dropdown-cont").removeClass("country-100"),$(".country-mob-input-container .line-divider").removeClass("hide")),o.item.code==$("body").attr("data-defaultcountry")?$(".location_input_container .reset-country").addClass("hide"):$(".location_input_container .reset-country").removeClass("hide");let n=o.item&&o.item.countries_unicode?o.item.countries_unicode:"country_grey.jpeg";return $(".selected_country_flag img").attr("src",`${cdn.assetsBaseURL}banners/countries/${n}`),$(".selected_country_flag img").removeClass("only_globe"),$("ul.ui-menu").css({top:"0px",left:"0px"}),!1},open:function(e,t){($(this).prev("label")||$(this).next("label")).length>0?$("ul.ui-menu").width($(this).parents("div").width()):$("ul.ui-menu").width($(this).width());let o={"z-index":"9999",width:"30%"};$("ul.ui-menu").position().left&&(o.left=$("ul.ui-menu").position().left-35),$("ul.ui-menu").css(o)},change:function(e,o){if(!o.item){console.log("Not selected from dropdown - check if it is valid");var l=t.val().trim().toLowerCase();if(!sourceMapedByName)for(var r in sourceMapedByName={},i)a&&n in i[r]?1===i[r][n]&&(sourceMapedByName[i[r].name.toLowerCase()]=i[r]):sourceMapedByName[i[r].name.toLowerCase()]=i[r];if(t.addClass("no_globalCountry_selected"),l.toLowerCase()in sourceMapedByName)t.val(sourceMapedByName[l].code),sourceMapedByName[l].id&&$(this).parents("form").find("input[name=cid]").val(sourceMapedByName[l].id),sourceMapedByName[l].mprefix&&($(this).parents("form").find("input[name=mprefix]").val(sourceMapedByName[l].mprefix),$(this).parents("form").find("span.countryCodeVal").text(sourceMapedByName[l].mprefix),$(this).parents("form").find("span.mprefixLabel").text(sourceMapedByName[l].mprefix)),$(".suggestCountry").removeClass("error"),c(sourceMapedByName[l].id,sourceMapedByName[l].code,sourceMapedByName[l].ccode);else{$(".suggestCountry").val(""),$(".suggestCountry").addClass("error");var s=$(".revamp-form-input-country");s.length&&s.is(":visible")&&!s.val().length&&($(".revamp-form-input-country").css("max-width","100%"),$(".revamp-summary-edit-country").addClass("hide"))}}}}).autocomplete("instance")._renderItem=function(e,t){var o="";return!0===l?o+="<a href='/"+t.url+"'>"+t.code+"</a>":(o+='<div class="country-list">',o+=t.countries_unicode?`<div class="dropdown_country_flags">\n      <img class="img-responsive" src="${cdn.assetsBaseURL}banners/countries/${t.countries_unicode}" alt="country images" />\n      </div>`:"",o+="<span>"+t.code+"</span>",o+="</div>"),e.addClass("global-country-list-revamp"),$("<li class='autocomplete-items country_revamp_autocomplete_items redHoverRevamp Paragraph-14-S--Regular'>").append(o).appendTo(e)}})),$(document).on("focusin",".location_input #pincode_city_field_international",(function(){var e=JSON.parse(sessionStorage.getItem("ccdata")),t=$(this),o=this,n=!1,a=t.data("courier"),l=t.data("redirect"),i=null;e&&e.interNationalCityStateMapping&&e.interNationalCityStateMapping[$("#country").val()]&&e.interNationalCityStateMapping[$("#country").val()].cities&&(i=e.interNationalCityStateMapping[$("#country").val()].cities);var r=t.data("handlers")?t.data("handlers").split(","):[],c=($(window).height(),t.parents("div").height(),t.parents("div").offset().top,{});c=isPhone?{my:"left bottom",at:"left top",collision:"none"}:{my:"left top",at:"left bottom",collision:"none"},t.autocomplete({source:function(e,o){const a=new RegExp(`${t.val()}`,"i");var l=[];i&&(l=i.filter((e=>e.match(a)))),n=!!l.length,$("ul.ui-menu").css({top:"0px",left:"0px"}),l.push("Other"),o(l)},minLength:2,focus:function(e,o){return t.val(o.item.code),!1},select:function(e,o){return e.stopPropagation(),$("#pincode_city_field_international").removeClass("error"),t.removeClass("no_globalCity_selected"),$(this).parents(".country-mob-input-container").find("#pincode_city_field_international").val(o.item.value),$("ul.ui-menu").css({top:"0px",left:"0px"}),!1},open:function(e,t){($(this).prev("label")||$(this).next("label")).length>0?$("ul.ui-menu").width($(this).parents("div").width()):$("ul.ui-menu").width($(this).width()),$("ul.ui-menu").width(200),$("ul.ui-menu").css({"z-index":"9999"})},change:function(e,n){if(!n.item){$("#pincode_city_field_international").removeClass("error"),console.log("Not selected from dropdown - check if it is valid");var l=t.val().trim().toLowerCase();if(t.val()&&t.val().trim()&&t.addClass("no_globalCity_selected"),!sourceMapedByName)for(var c in sourceMapedByName={},i)a&&"co"in i[c]?1===i[c].co&&(sourceMapedByName[i[c].name.toLowerCase()]=i[c]):i[c]&&(sourceMapedByName[i[c].toLowerCase()]=i[c]);l.toLowerCase()in sourceMapedByName&&(document.querySelector(".autocomplete-results").style.display="none",t.val(sourceMapedByName[l]),sourceMapedByName[l].id&&$(this).parents("form").find("input[name=cid]").val(sourceMapedByName[l].id),function(e,n,a){if(r.length>0)for(var l in t.data("cid",e),t.data("ccode",n),t.data("cccode",a),r){var i=window[r[l].trim()];i&&i.constructor===Function&&i(o)}}(sourceMapedByName[l].id,sourceMapedByName[l].code,sourceMapedByName[l].ccode,sourceMapedByName[l].showInput))}},position:c}).autocomplete("instance")._renderItem=function(e,t){var o="";return o+=!0===l?"<a href='/"+t.url+"'>"+t.code+"</a>":`<span data-value=${t.value}>`+t.label+"</span>",e.addClass("country-revamp-cont"),e.addClass("global-country-revamp-cont"),n?$("<li class='international-countries-cities autocomplete-items country_revamp_autocomplete_items redHover Paragraph-14-S--Regular'>").append(o).appendTo(e):$("<li class='autocomplete-items country_revamp_autocomplete_items redHover Paragraph-14-S--Regular'>").append(o).appendTo(e)}})),$(document).on("focus","input.suggestGlobalCountry",suggestGlobalCountry),$(document).on("mousedown",(function(e){$(e.target).closest("#countrySelectionModal, input.suggestGlobalCountry, .tr-overlay").length||$("#countrySelectionModal").addClass("hide")})),$(document).on("click",".tr-overlay.global-location",(function(e){e.preventDefault(),e.stopPropagation(),$("#countrySelectionModal.hide").length?$(this).siblings(".suggestGlobalCountry").focus():$("#countrySelectionModal").addClass("hide")})),$(document).on("click",".saved_addresses_container .addressBox",(function(e){e.stopPropagation();var t=$(this).data();addressID=t.addressid,$("#country.suggestGlobalCountry").val(t.country),$(".saved_addresses_container .addressBox").removeClass("global_address_selected"),$(this).addClass("global_address_selected"),$(".no_globalCountry_selected").removeClass("no_globalCountry_selected"),$(".no_globalCity_selected").removeClass("no_globalCity_selected"),"99"!=t.cid?($("#pincode_city_field").addClass("hide"),t.showinput?($("#pincode_city_field_international").removeClass("hide").val(t.city),$(".country-mob-input-container .dropdown-cont").removeClass("country-100"),$(".country-mob-input-container .line-divider").removeClass("hide")):($("#pincode_city_field_international").addClass("hide").val(""),$(".country-mob-input-container .dropdown-cont").addClass("country-100"),$(".country-mob-input-container .line-divider").addClass("hide"))):($("#pincode_city_field").removeClass("hide").val(t.pincode),$("#pincode_city_field_international").addClass("hide"),$(".country-mob-input-container .dropdown-cont").removeClass("country-100"),$(".country-mob-input-container .line-divider").removeClass("hide")),$(".redirect-url").attr("data-redirecturl",t.redirecturl?t.redirecturl:""),$(".redirect-url").attr("data-globalcountrycode",t.cid?t.cid:""),t.cid==$("body").attr("data-defaultcountrycode")?$(".location_input_container .reset-country").addClass("hide"):$(".location_input_container .reset-country").removeClass("hide");let o=t.flag?t.flag:"country_grey.jpeg";$(".selected_country_flag img").attr("src",`${cdn.assetsBaseURL}banners/countries/${o}`),$(".selected_country_flag img").removeClass("only_globe"),viaAddressSelect=!0,$(".redirect-url").click(),$(".close-popup").click()})),$(document).on("click",".location_input_container .arrow-down",(function(){$(".location_input_container #country").val()&&$(".location_input_container #country").val().trim()&&($(".location_input_container #country")[0].selectionStart=$(".location_input_container #country").val().length)})),$(document).on("input",".location_input_container #pincode_city_field_international",(function(){$(this).val()&&$(this).val().trim()||$("#pincode_city_field_international").removeClass("no_globalCity_selected")})),$(document).on("input",".location_input_container #country",(function(){$(this).val()&&$(this).val().trim()||($(".selected_country_flag img").attr("src",`${cdn.assetsBaseURL}assets/svg-icons/global_worldwide.svg`),$(".selected_country_flag img").addClass("only_globe"))})),$(document).on("click",".location_input_container .reset-country .reset-function",(function(e){e.stopPropagation(),$.ajax({url:"/globalCountryReset",method:"get",success:function(e){if(e.success){$(".location_input_container #country").val($("body").attr("data-storecountry")),$(".redirect-url").attr("data-redirecturl",$("body").attr("data-webstoreredirect")),$(".redirect-url").attr("data-globalcountrycode",$("body").attr("data-defaultcountrycode")),$(".country_selected_cont").addClass("hide"),$(".inf-edit-icon").addClass("hide"),$(".inf-chevron-icon").removeClass("hide"),$(".country_content_cont").removeClass("hide"),$(".location_input_container #pincode_city_field").val(""),$(".location_input_container #pincode_city_field_international").val(""),$(".global_country_logo").attr("href","/");let e={event:"set_location_reset",user_mode:$("#user-data").data("userid")?"loggedin":"guest",path:$(".widget_page_cont").length?"TP":"PL"};pushDataLayer(e),localStorage.setItem("globalCountry",$("body").attr("data-storecountry")),sessionStorage.setItem("show-location-auto-popup",0),window.location.href="/",localStorage.setItem("addressID",null)}}})}));